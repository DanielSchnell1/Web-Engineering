<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Poker Game</title>
  <link rel="stylesheet" href="../css/game.css" />
  <link href="https://fonts.googleapis.com/css2?family=League+Spartan&display=swap" rel="stylesheet">
</head>
<body>

  <div class="table" id="table"></div>
  <div id="community" class="community-cards"></div>

  <div class="controls">
    <label for="bet">Einsatz:</label>
    <input type="range" id="bet" name="bet" min="0" max="1000" step="10">
    <span id="betValue">500</span> Chips
    <br><br>
    <button id="betButton">Setzen</button>
  </div>

  <script>
    const table = document.getElementById('table');
    const data = [
      {user: 'user1', cards: ['rueckseite', 'rueckseite']},
      {user: 'user2', cards: ['rueckseite', 'rueckseite']},
      {user: 'user3', cards: ['rueckseite', 'rueckseite']},
      {user: 'DU', cards: ['2_of_hearts', '3_of_clubs']}
    ];

    const positions = ['top', 'left', 'right', 'bottom'];

    data.forEach((userData, index) => {
      const playerDiv = document.createElement('div');
      playerDiv.classList.add('player', positions[index]);
      if (userData.user === 'DU') playerDiv.classList.add('highlight');

      const nameDiv = document.createElement('div');
      nameDiv.classList.add('name');
      nameDiv.textContent = userData.user;
      playerDiv.appendChild(nameDiv);

      userData.cards.forEach((card, cardIndex) => {
        const img = document.createElement('img');
        img.src = `cards/${card}.svg`;
        img.alt = card;
        img.classList.add('card');
        img.setAttribute('draggable', 'true');
        img.id = `${index + 1}${cardIndex + 1}`;
        playerDiv.appendChild(img);
      });

      table.appendChild(playerDiv);
    });

    // Community Cards
    const community = document.getElementById('community');
    const communityCards = ['10_of_hearts', '7_of_spades', '2_of_diamonds', 'karo_dame', 'pik_ass'];
    communityCards.forEach(card => {
      const img = document.createElement('img');
      img.src = `cards/${card}.svg`;
      img.alt = card;
      community.appendChild(img);
    });

    // Drag & Drop
    const images = document.querySelectorAll('img[draggable="true"]');
    let move = [];

    images.forEach(img => {
      img.addEventListener('dragstart', (e) => {
        move[0] = e.target.id; 
      });
      img.addEventListener("dragover", (e) => {
        e.preventDefault();
        img.classList.add("drag-over");
      });
      img.addEventListener("dragleave", () => {
        img.classList.remove("drag-over");
      });
      img.addEventListener("drop", (e) => {
        e.preventDefault();
        img.classList.remove("drag-over");
        move[1] = e.target.id; 
        console.log("move: " + move);    
        move = [];
      });
    });

    // Einsatzanzeige
    const betSlider = document.getElementById('bet');
    const betValue = document.getElementById('betValue');
    const betButton = document.getElementById('betButton');

    betSlider.addEventListener('input', () => {
      betValue.textContent = betSlider.value;
    });

    betButton.addEventListener('click', () => {
      alert(`Du setzt ${betSlider.value} Chips!`);
    });
  </script>

</body>
</html>
